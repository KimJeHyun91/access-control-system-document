openapi: 3.0.3
info:
  title: HR Service API
  description: |
    인사 및 조직 관리 서비스 API 명세서입니다.<br>
    조직(Organization), 부서(Department), 직원(Employee) 및 인사 기초 정보(직무/직책/직급)를 관리합니다.
  version: 1.0.0
  contact:
    name: "Jehyun Kim"

servers:
  - url: http://localhost:4200/api/v1/hr
    description: "로컬 개발 서버"

tags:
  - name: 1. Organization Management
    description: 조직(법인) 관리
  - name: 2. Department Management
    description: 부서 구조 관리
  - name: 3. Job Management
    description: 직무(Job) 관리
  - name: 4. Position Management
    description: 직책(Position) 관리
  - name: 5. Grade Management
    description: 직급(Grade) 관리
  - name: 6. Employee Management
    description: 직원 프로필 및 발령 관리

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  responses:
    BadRequest:
      description: "잘못된 요청"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    Unauthorized:
      description: "인증 실패"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    Forbidden:
      description: "권한 없음"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    NotFound:
      description: "리소스를 찾을 수 없음"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    Conflict:
      description: "데이터 충돌 (중복 등)"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    InternalServerError:
      description: "서버 내부 오류"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

  schemas:
    PageMetadata:
      type: "object"
      properties:
        size:
          type: "integer"
          description: "페이지 당 항목 수"
          example: 20
        page:
          type: "integer"
          description: "현재 페이지 번호 (0부터 시작)"
          example: 0
        totalElements:
          type: "integer"
          description: "전체 항목 수"
          example: 100
        totalPages:
          type: "integer"
          description: "전체 페이지 수"
          example: 5
        isLast:
          type: "boolean"
          description: "마지막 페이지 여부"
          example: false
        hasNext:
          type: "boolean"
          description: "다음 페이지 존재 여부"
          example: true

    DeleteResult:
      type: "object"
      properties:
        id:
          type: "string"
          format: "uuid"
          description: "삭제된 리소스의 ID"
          example: "550e8400-e29b-41d4-a716-446655440000"
        isSoftDeleted:
          type: "boolean"
          description: "논리적 삭제 여부"
          example: true
        isHardDeleted:
          type: "boolean"
          description: "물리적 삭제 여부"
          example: false
        message:
          type: "string"
          description: "삭제 결과 메시지"
          example: "성공적으로 보관(Soft Delete)되었습니다."

    ErrorResponse:
      type: "object"
      properties:
        errorCode:
          type: "string"
          description: "에러 코드"
          example: "INVALID_REQUEST"
        errorMessage:
          type: "string"
          description: "에러 메시지"
          example: "잘못된 요청입니다."
        errorDetails:
          type: "object"
          nullable: true
          description: "상세 에러 내용"
          example: { "field": "email", "reason": "format invalid" }

    # --- HR Core Schemas ---
    Organization:
      type: "object"
      properties:
        id:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: "string"
          description: "조직(법인)명"
          example: "삼성전자 DS부문"
        code:
          type: "string"
          description: "조직 코드"
          example: "SEC-DS"
        type:
          type: "string"
          description: "조직 유형 (INTERNAL: 내부 법인/사업장, PARTNER: 협력사/외부업체)"
          enum: ["INTERNAL", "PARTNER"]
          example: "INTERNAL"
        description:
          type: "string"
          nullable: true
          example: "반도체 사업부"
        timezone:
          type: "string"
          example: "Asia/Seoul"
        businessRegistrationNumber:
          type: "string"
          description: "사업자등록번호 (마스킹된 값)"
          example: "123-45-*****"
        # [외부 연동 필드]
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자 (예: SAP ID)"
          example: "ORG-EXT-001"
        lastSyncAt:
          type: "string"
          format: "date-time"
          nullable: true
          description: "마지막 동기화 일시"
          example: "2023-10-01T12:00:00Z"
        isSynced:
          type: "boolean"
          description: "외부 시스템 연동 여부"
          example: false
        isActive:
          type: "boolean"
          example: true

    OrganizationRequest:
      type: "object"
      required: ["name"]
      properties:
        name:
          type: "string"
          description: "조직(법인)명"
          example: "삼성전자 DS부문"
        code:
          type: "string"
          description: "조직 코드"
          example: "SEC-DS"
        type:
          type: "string"
          description: "조직 유형"
          enum: ["INTERNAL", "PARTNER"]
          default: "INTERNAL"
          example: "INTERNAL"
        description:
          type: "string"
          nullable: true
          example: "반도체 사업부"
        timezone:
          type: "string"
          default: "Asia/Seoul"
          example: "Asia/Seoul"
        businessRegistrationNumber:
          type: "string"
          description: "사업자등록번호 (암호화되어 저장됨)"
          example: "123-45-67890"
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "ORG-EXT-001"

    Department:
      type: "object"
      properties:
        id:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440002"
        organizationId:
          type: "string"
          format: "uuid"
          description: "소속 조직 ID"
          example: "550e8400-e29b-41d4-a716-446655440000"
        parentId:
          type: "string"
          format: "uuid"
          nullable: true
          description: "상위 부서 ID (Root인 경우 null)"
          example: "550e8400-e29b-41d4-a716-446655440001"
        name:
          type: "string"
          description: "부서명"
          example: "인사팀"
        code:
          type: "string"
          description: "부서 코드"
          example: "DEPT-001"
        description:
          type: "string"
          nullable: true
          example: "인사 및 채용 관리"
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "DEPT-EXT-001"
        lastSyncAt:
          type: "string"
          format: "date-time"
          nullable: true
          example: "2023-10-01T12:00:00Z"
        isSynced:
          type: "boolean"
          example: false
        isActive:
          type: "boolean"
          example: true

    DepartmentRequest:
      type: "object"
      required: ["organizationId", "name"]
      properties:
        organizationId:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440000"
        parentId:
          type: "string"
          format: "uuid"
          nullable: true
          example: "550e8400-e29b-41d4-a716-446655440001"
        name:
          type: "string"
          example: "인사팀"
        code:
          type: "string"
          example: "DEPT-001"
        description:
          type: "string"
          example: "인사 및 채용 관리"
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "DEPT-EXT-001"

    # --- Specific Codes (Job, Position, Grade) ---
    Job:
      type: "object"
      properties:
        id:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440003"
        organizationId:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: "string"
          example: "SW개발"
        code:
          type: "string"
          example: "JOB-DEV"
        description:
          type: "string"
          nullable: true
          example: "소프트웨어 개발 직무"
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "JOB-EXT-001"
        lastSyncAt:
          type: "string"
          format: "date-time"
          nullable: true
          example: "2023-10-01T12:00:00Z"
        isSynced:
          type: "boolean"
          example: false
        isActive:
          type: "boolean"
          example: true

    JobRequest:
      type: "object"
      required: ["organizationId", "name"]
      properties:
        organizationId:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: "string"
          example: "SW개발"
        code:
          type: "string"
          example: "JOB-DEV"
        description:
          type: "string"
          example: "소프트웨어 개발 직무"
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "JOB-EXT-001"

    Position:
      type: "object"
      properties:
        id:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440004"
        organizationId:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: "string"
          example: "팀장"
        code:
          type: "string"
          example: "POS-LEADER"
        description:
          type: "string"
          nullable: true
          example: "부서 관리자"
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "POS-EXT-001"
        lastSyncAt:
          type: "string"
          format: "date-time"
          nullable: true
          example: "2023-10-01T12:00:00Z"
        isSynced:
          type: "boolean"
          example: false
        isActive:
          type: "boolean"
          example: true

    PositionRequest:
      type: "object"
      required: ["organizationId", "name"]
      properties:
        organizationId:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: "string"
          example: "팀장"
        code:
          type: "string"
          example: "POS-LEADER"
        description:
          type: "string"
          example: "부서 관리자"
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "POS-EXT-001"

    Grade:
      type: "object"
      properties:
        id:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440005"
        organizationId:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: "string"
          example: "책임"
        code:
          type: "string"
          example: "GRD-L2"
        description:
          type: "string"
          nullable: true
          example: "중간 관리자급"
        step:
          type: "integer"
          description: "서열 (높을수록 상위 직급)"
          example: 2
          nullable: true
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "GRD-EXT-001"
        lastSyncAt:
          type: "string"
          format: "date-time"
          nullable: true
          example: "2023-10-01T12:00:00Z"
        isSynced:
          type: "boolean"
          example: false
        isActive:
          type: "boolean"
          example: true

    GradeRequest:
      type: "object"
      required: ["organizationId", "name"]
      properties:
        organizationId:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: "string"
          example: "책임"
        code:
          type: "string"
          example: "GRD-L2"
        description:
          type: "string"
          example: "중간 관리자급"
        step:
          type: "integer"
          description: "직급 서열"
          nullable: true
          example: 2
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자"
          example: "GRD-EXT-001"

    # --- Employee & Assignment ---
    Employee:
      type: "object"
      properties:
        id:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440006"
        organizationId:
          type: "string"
          format: "uuid"
          description: "소속 조직(법인/협력사) ID"
          example: "550e8400-e29b-41d4-a716-446655440000"
        userId:
          type: "string"
          format: "uuid"
          nullable: true
          description: "연결된 시스템 계정 ID"
          example: "550e8400-e29b-41d4-a716-446655440007"
        
        # [기본 정보]
        employeeCode:
          type: "string"
          description: "사번"
          example: "2023001"
        employmentType:
          type: "string"
          description: "고용 형태 (REGULAR, CONTRACT, DISPATCHED, PARTNER, INTERN, FREELANCER)"
          example: "REGULAR"
        name:
          type: "string"
          description: "이름"
          example: "홍길동"
        englishName:
          type: "string"
          nullable: true
          description: "영문 이름"
          example: "Hong Gil-dong"
        profileImageUrl:
          type: "string"
          format: "uri"
          nullable: true
          description: "프로필 사진 URL"
          example: "https://s3.example.com/profile.jpg"
        email:
          type: "string"
          format: "email"
          description: "사내 이메일"
          example: "hong@company.com"
        personalEmail:
          type: "string"
          format: "email"
          nullable: true
          description: "개인 이메일"
          example: "hong.private@gmail.com"
        phoneNumber:
          type: "string"
          nullable: true
          description: "개인 휴대전화"
          example: "010-1234-5678"
        
        # [민감 정보 (마스킹 처리될 수 있음)]
        residentRegistrationNumber:
          type: "string"
          nullable: true
          description: "주민등록번호 (마스킹된 값)"
          example: "900101-1xxxxxx"
        socialSecurityNumber:
          type: "string"
          nullable: true
          description: "해외 식별 번호 (SSN) (마스킹된 값)"
          example: "000-00-****"
        passportNumber:
          type: "string"
          nullable: true
          description: "여권 번호 (마스킹된 값)"
          example: "M1234****"
        
        # [날짜 정보]
        joinDate:
          type: "string"
          format: "date"
          nullable: true
          description: "입사일"
          example: "2023-01-01"
        resignationDate:
          type: "string"
          format: "date"
          nullable: true
          description: "퇴사일"
          example: "2024-12-31"
        contractStartDate:
          type: "string"
          format: "date"
          nullable: true
          description: "계약 시작일"
          example: "2023-01-01"
        contractEndDate:
          type: "string"
          format: "date"
          nullable: true
          description: "계약 종료일"
          example: "2023-12-31"
        
        # [개인정보 동의]
        privacyAgreementAt:
          type: "string"
          format: "date-time"
          description: "개인정보 수집 동의 일시"
          example: "2023-01-01T09:00:00Z"
        privacyPolicyVersion:
          type: "string"
          description: "개인정보 처리방침 버전"
          example: "v1.0"
        signatureImageUrl:
          type: "string"
          format: "uri"
          nullable: true
          description: "자필 서명 이미지 URL"
          example: "https://s3.example.com/emp_sign.png"
        
        # [기타 신상 정보]
        birthDate:
          type: "string"
          format: "date"
          nullable: true
          description: "생년월일"
          example: "1990-01-01"
        gender:
          type: "string"
          nullable: true
          description: "성별 (M/F/OTHER)"
          example: "M"
        nationality:
          type: "string"
          nullable: true
          description: "국적 (ISO 3166-1 alpha-2)"
          example: "KR"
        militaryStatus:
          type: "string"
          nullable: true
          description: "병역 사항"
          example: "군필"
        
        # [주소 및 연락처]
        zipCode:
          type: "string"
          nullable: true
          description: "우편번호"
          example: "13529"
        address:
          type: "string"
          nullable: true
          description: "기본 주소"
          example: "경기도 성남시..."
        detailAddress:
          type: "string"
          nullable: true
          description: "상세 주소"
          example: "A동 101호"
        emergencyContact:
          type: "string"
          nullable: true
          description: "비상 연락처"
          example: "010-9876-5432"
        carNumber:
          type: "string"
          nullable: true
          description: "차량 번호"
          example: "12가3456"
        bankAccount:
          type: "object"
          nullable: true
          description: "급여 계좌 정보"
          properties:
            bank:
              type: "string"
              example: "Shinhan"
            accountNumber: 
              type: "string" 
              description: "계좌 번호 (마스킹된 값)"
              example: "110-123-******"
            accountHolder:
              type: "string"
              example: "홍길동"

        # 현재 소속 정보 (Assignment에서 조회된 최신 정보)
        currentAssignment:
          $ref: "#/components/schemas/CurrentAssignment"

        # [외부 연동 필드]
        externalSystemId:
          type: "string"
          nullable: true
          description: "외부 시스템 식별자 (예: HR 시스템 사번 Key)"
          example: "EMP-EXT-001"
        lastSyncAt:
          type: "string"
          format: "date-time"
          nullable: true
          example: "2023-10-01T12:00:00Z"
        isSynced:
          type: "boolean"
          example: false
        isActive:
          type: "boolean"
          example: true
        createdAt:
          type: "string"
          format: "date-time"
          example: "2023-01-01T09:00:00Z"

    # --- [NEW] CurrentAssignment Schema ---
    CurrentAssignment:
      type: "object"
      description: "직원의 현재 소속 및 직책 상세 정보"
      properties:
        employeeName: { type: "string", example: "홍길동" }
        employeeCode: { type: "string", example: "2023001" }
        appointmentType:
          type: "string"
          description: "발령 구분 (HIRE, PROMOTION, TRANSFER, DISPATCH, LEAVE, RETURN, RETIREMENT, CHANGE)"
          example: "TRANSFER"
        appointmentDate:
          type: "string"
          format: "date"
          description: "발령 일자 (시작일)"
          example: "2023-10-01"
        assignmentEndDate:
          type: "string"
          format: "date"
          nullable: true
          description: "발령 종료 예정일"
          example: "2024-09-30"
        reason:
          type: "string"
          description: "발령 사유 상세"
          example: "조직 개편에 따른 전배"
        
        # [스냅샷 정보]
        organizationCode: { type: "string", example: "ORG_001" }
        organizationName: { type: "string", example: "테크기업" }
        departmentCode: { type: "string", example: "DEPT_101" }
        departmentName: { type: "string", example: "영업 2팀" }
        jobCode: { type: "string", nullable: true, example: "JOB_005" }
        jobName: { type: "string", nullable: true, example: "기술 영업" }
        positionCode: { type: "string", nullable: true, example: "POS_003" }
        positionName: { type: "string", nullable: true, example: "과장" }
        gradeCode: { type: "string", nullable: true, example: "GR_004" }
        gradeName: { type: "string", nullable: true, example: "책임" }
        
        isPrimary:
          type: "boolean"
          description: "주 직무 여부"
          example: true
        note:
          type: "string"
          nullable: true
          description: "비고"
          example: "특채 입사"
        prevDepartmentName:
          type: "string"
          nullable: true
          description: "이전 부서명 (이력 추적용)"
          example: "영업 1팀"
        prevPositionName:
          type: "string"
          nullable: true
          description: "이전 직책명 (이력 추적용)"
          example: "대리"

    # --- [NEW] 생성 전용 스키마: initialAssignment 포함 ---
    EmployeeCreateRequest:
      type: "object"
      required: ["organizationId", "name", "email", "employeeCode", "employmentType", "privacyAgreementAt", "privacyPolicyVersion", "initialAssignment"]
      properties:
        organizationId:
          type: "string"
          format: "uuid"
          description: "소속 조직(법인 또는 파트너사) ID"
          example: "550e8400-e29b-41d4-a716-446655440000"
        userId:
          type: "string"
          format: "uuid"
          nullable: true
          example: "550e8400-e29b-41d4-a716-446655440007"
        
        # [기본 정보]
        employeeCode: { type: "string", example: "2023001" }
        employmentType:
          type: "string"
          enum: ["REGULAR", "CONTRACT", "DISPATCHED", "PARTNER", "INTERN", "FREELANCER"]
          example: "REGULAR"
        name:
          type: "string"
          example: "홍길동"
        englishName:
          type: "string"
          nullable: true
          example: "Hong Gil-dong"
        profileImageUrl:
          type: "string"
          format: "uri"
          nullable: true
          example: "https://s3.example.com/profile.jpg"
        email:
          type: "string"
          format: "email"
          example: "hong@company.com"
        personalEmail:
          type: "string"
          format: "email"
          nullable: true
          example: "hong.private@gmail.com"
        phoneNumber:
          type: "string"
          nullable: true
          example: "010-1234-5678"
        
        # [민감 정보]
        residentRegistrationNumber:
          type: "string"
          nullable: true
          example: "900101-1xxxxxx"
        socialSecurityNumber:
          type: "string"
          nullable: true
          example: "000-00-0000"
        passportNumber:
          type: "string"
          nullable: true
          example: "M12345678"
        
        # [날짜]
        joinDate:
          type: "string"
          format: "date"
          nullable: true
          example: "2023-01-01"
        contractStartDate:
          type: "string"
          format: "date"
          nullable: true
          example: "2023-01-01"
        contractEndDate:
          type: "string"
          format: "date"
          nullable: true
          example: "2023-12-31"
        
        # [동의]
        privacyAgreementAt:
          type: "string"
          format: "date-time"
          example: "2023-01-01T09:00:00Z"
        privacyPolicyVersion:
          type: "string"
          example: "v1.0"
        
        # [기타]
        signatureImageUrl:
          type: "string"
          format: "uri"
          nullable: true
          example: "https://s3.example.com/emp_sign.png"
        birthDate:
          type: "string"
          format: "date"
          nullable: true
          example: "1990-01-01"
        gender:
          type: "string"
          nullable: true
          example: "M"
        nationality:
          type: "string"
          nullable: true
          example: "KR"
        militaryStatus:
          type: "string"
          nullable: true
          example: "군필"
        zipCode:
          type: "string"
          nullable: true
          example: "13529"
        address:
          type: "string"
          nullable: true
          example: "경기도 성남시..."
        detailAddress:
          type: "string"
          nullable: true
          example: "A동 101호"
        emergencyContact:
          type: "string"
          nullable: true
          example: "010-9876-5432"
        carNumber:
          type: "string"
          nullable: true
          example: "12가3456"
        bankAccount:
          type: "object"
          nullable: true
          properties:
            bank:
              type: "string"
              example: "Shinhan"
            accountNumber:
              type: "string"
              example: "110-123-456789"
            accountHolder:
              type: "string"
              example: "홍길동"
            
        # [외부 연동]
        externalSystemId:
          type: "string"
          nullable: true
          example: "EMP-EXT-001"
        
        # [생성 전용] 직원 생성 시 초기 발령 정보 필수
        initialAssignment:
          type: "object"
          required: ["departmentId", "appointmentType", "appointmentDate", "reason"]
          properties:
            departmentId:
              type: "string"
              format: "uuid"
              example: "550e8400-e29b-41d4-a716-446655440002"
            jobId:
              type: "string"
              format: "uuid"
              nullable: true
              example: "550e8400-e29b-41d4-a716-446655440003"
            positionId:
              type: "string"
              format: "uuid"
              nullable: true
              example: "550e8400-e29b-41d4-a716-446655440004"
            gradeId:
              type: "string"
              format: "uuid"
              nullable: true
              example: "550e8400-e29b-41d4-a716-446655440005"
            appointmentType:
              type: "string"
              example: "HIRE"
            appointmentDate:
              type: "string"
              format: "date"
              example: "2023-01-01"
            reason:
              type: "string"
              example: "신규 입사"
            isPrimary:
              type: "boolean"
              default: true
              example: true

    # --- [NEW] 수정 전용 스키마: initialAssignment 제외 ---
    EmployeeUpdateRequest:
      type: "object"
      required: ["organizationId", "name", "email", "employeeCode", "employmentType"]
      properties:
        organizationId:
          type: "string"
          format: "uuid"
          description: "소속 조직(법인 또는 파트너사) ID"
          example: "550e8400-e29b-41d4-a716-446655440000"
        userId:
          type: "string"
          format: "uuid"
          nullable: true
          example: "550e8400-e29b-41d4-a716-446655440007"
        
        # [기본 정보]
        employeeCode: { type: "string", example: "2023001" }
        employmentType:
          type: "string"
          enum: ["REGULAR", "CONTRACT", "DISPATCHED", "PARTNER", "INTERN", "FREELANCER"]
          example: "REGULAR"
        name:
          type: "string"
          example: "홍길동"
        englishName:
          type: "string"
          nullable: true
          example: "Hong Gil-dong"
        profileImageUrl:
          type: "string"
          format: "uri"
          nullable: true
          example: "https://s3.example.com/profile.jpg"
        email:
          type: "string"
          format: "email"
          example: "hong@company.com"
        personalEmail:
          type: "string"
          format: "email"
          nullable: true
          example: "hong.private@gmail.com"
        phoneNumber:
          type: "string"
          nullable: true
          example: "010-1234-5678"
        
        # [민감 정보]
        residentRegistrationNumber:
          type: "string"
          nullable: true
          example: "900101-1xxxxxx"
        socialSecurityNumber:
          type: "string"
          nullable: true
          example: "000-00-0000"
        passportNumber:
          type: "string"
          nullable: true
          example: "M12345678"
        
        # [날짜]
        joinDate:
          type: "string"
          format: "date"
          nullable: true
          example: "2023-01-01"
        contractStartDate:
          type: "string"
          format: "date"
          nullable: true
          example: "2023-01-01"
        contractEndDate:
          type: "string"
          format: "date"
          nullable: true
          example: "2023-12-31"
        
        # [동의]
        privacyAgreementAt:
          type: "string"
          format: "date-time"
          example: "2023-01-01T09:00:00Z"
        privacyPolicyVersion:
          type: "string"
          example: "v1.0"
        
        # [기타]
        signatureImageUrl:
          type: "string"
          format: "uri"
          nullable: true
          example: "https://s3.example.com/emp_sign.png"
        birthDate:
          type: "string"
          format: "date"
          nullable: true
          example: "1990-01-01"
        gender:
          type: "string"
          nullable: true
          example: "M"
        nationality:
          type: "string"
          nullable: true
          example: "KR"
        militaryStatus:
          type: "string"
          nullable: true
          example: "군필"
        zipCode:
          type: "string"
          nullable: true
          example: "13529"
        address:
          type: "string"
          nullable: true
          example: "경기도 성남시..."
        detailAddress:
          type: "string"
          nullable: true
          example: "A동 101호"
        emergencyContact:
          type: "string"
          nullable: true
          example: "010-9876-5432"
        carNumber:
          type: "string"
          nullable: true
          example: "12가3456"
        bankAccount:
          type: "object"
          nullable: true
          properties:
            bank:
              type: "string"
              example: "Shinhan"
            accountNumber:
              type: "string"
              example: "110-123-456789"
            accountHolder:
              type: "string"
              example: "홍길동"
            
        # [외부 연동]
        externalSystemId:
          type: "string"
          nullable: true
          example: "EMP-EXT-001"

    AssignmentRequest:
      type: "object"
      required: ["departmentId", "appointmentType", "appointmentDate", "reason"]
      description: "인사 발령 요청 (부서 이동, 승진 등)"
      properties:
        departmentId:
          type: "string"
          format: "uuid"
          description: "발령 부서 ID"
          example: "550e8400-e29b-41d4-a716-446655440002"
        jobId:
          type: "string"
          format: "uuid"
          nullable: true
          example: "550e8400-e29b-41d4-a716-446655440003"
        positionId:
          type: "string"
          format: "uuid"
          nullable: true
          example: "550e8400-e29b-41d4-a716-446655440004"
        gradeId:
          type: "string"
          format: "uuid"
          nullable: true
          example: "550e8400-e29b-41d4-a716-446655440005"
        
        # [발령 메타데이터]
        appointmentType:
          type: "string"
          description: "발령 구분 (HIRE, PROMOTION, TRANSFER, DISPATCH, LEAVE, RETURN, RETIREMENT, CHANGE)"
          example: "TRANSFER"
        appointmentDate:
          type: "string"
          format: "date"
          description: "발령 일자 (시작일)"
          example: "2023-10-01"
        assignmentEndDate:
          type: "string"
          format: "date"
          nullable: true
          description: "발령 종료 예정일"
          example: "2024-09-30"
        reason:
          type: "string"
          description: "발령 사유 상세"
          example: "정기 인사 이동"
        isPrimary:
          type: "boolean"
          description: "주 직무 여부"
          default: true
          example: true
        note:
          type: "string"
          description: "비고"
          example: "특별 승진"

    AssignmentHistory:
      type: "object"
      description: "과거 발령 시점의 스냅샷 데이터"
      properties:
        id:
          type: "string"
          format: "uuid"
          example: "550e8400-e29b-41d4-a716-446655440008"
        employeeName: { type: "string", example: "홍길동" }
        employeeCode: { type: "string", example: "2023001" }
        appointmentType: { type: "string", example: "PROMOTION" }
        appointmentNumber: { type: "string", nullable: true, example: "HR-2023-005" }
        appointmentDate: { type: "string", format: "date", example: "2022-01-01" }
        assignmentStartDate: { type: "string", format: "date", example: "2022-01-01" }
        assignmentEndDate: { type: "string", format: "date", nullable: true, example: "2023-09-30" }
        
        # [스냅샷 정보]
        snapshotOrganizationCode: { type: "string", nullable: true, example: "ORG_001" }
        snapshotOrganizationName: { type: "string", nullable: true, example: "테크기업" }
        snapshotDepartmentCode: { type: "string", example: "DEPT_100" }
        snapshotDepartmentName: { type: "string", example: "개발팀" }
        snapshotJobCode: { type: "string", nullable: true, example: "JOB_001" }
        snapshotJobName: { type: "string", nullable: true, example: "SW개발" }
        snapshotPositionCode: { type: "string", nullable: true, example: "POS_002" }
        snapshotPositionName: { type: "string", nullable: true, example: "팀원" }
        snapshotGradeCode: { type: "string", nullable: true, example: "GR_003" }
        snapshotGradeName: { type: "string", nullable: true, example: "선임" }
        
        reason: { type: "string", example: "정기 승진" }
        createdAt: { type: "string", format: "date-time", example: "2022-01-01T09:00:00Z" }
        
        approvers:
          type: "array"
          description: "승인자 목록 스냅샷"
          items:
            type: "object"
            properties:
              name: { type: "string", example: "이승인" }
              employeeCode: { type: "string", example: "2010001" }
              organizationName: { type: "string", example: "테크기업" }
              departmentName: { type: "string", example: "인사팀" }
              positionName: { type: "string", example: "팀장" }
              approvedAt: { type: "string", format: "date-time", example: "2021-12-28T14:00:00Z" }

security:
  - bearerAuth: []

paths:
  # ==========================================
  # 1. Organization Management
  # ==========================================
  /organizations:
    get:
      tags: ["1. Organization Management"]
      summary: "조직 목록 조회"
      description: "테넌트 내의 조직(법인/사업장/협력사) 목록을 조회합니다."
      parameters:
        - name: "name"
          in: "query"
          description: "조직명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "삼성전자"
        - name: "code"
          in: "query"
          description: "조직 코드 검색 (일치)"
          schema:
            type: "string"
            example: "SEC-DS"
        # [추가] 조직 유형 필터
        - name: "type"
          in: "query"
          description: "조직 유형 필터 (INTERNAL, PARTNER)"
          schema:
            type: "string"
            enum: ["INTERNAL", "PARTNER"]
            example: "INTERNAL"
        - name: "description"
          in: "query"
          description: "조직 설명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "반도체"
        - name: "businessRegistrationNumber"
          in: "query"
          description: "사업자등록번호 검색 (일치)"
          schema:
            type: "string"
            example: "123-45-67890"
        - name: "externalSystemId"
          in: "query"
          description: "외부 시스템 ID 검색"
          schema:
            type: "string"
            example: "ORG-EXT-001"
        - name: "isSynced"
          in: "query"
          description: "동기화 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "isActive"
          in: "query"
          description: "활성 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "page"
          in: "query"
          schema:
            type: "integer"
            default: 0
            example: 0
        - name: "size"
          in: "query"
          schema:
            type: "integer"
            default: 20
            example: 20
        - name: "sort"
          in: "query"
          description: "정렬 (예: name,asc)"
          schema:
            type: "array"
            items:
              type: "string"
            example: ["name,asc"]
      responses:
        '200':
          description: "성공"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  content:
                    type: "array"
                    items: { $ref: "#/components/schemas/Organization" }
                  page: { $ref: "#/components/schemas/PageMetadata" }
    post:
      tags: ["1. Organization Management"]
      summary: "조직 생성"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/OrganizationRequest" }
      responses:
        '200':
          description: "생성됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Organization" }

  /organizations/{id}:
    put:
      tags: ["1. Organization Management"]
      summary: "조직 정보 수정"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440000"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/OrganizationRequest" }
      responses:
        '200':
          description: "수정됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Organization" }
    delete:
      tags: ["1. Organization Management"]
      summary: "조직 삭제"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440000"
      responses:
        '200':
          description: "삭제 성공"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/DeleteResult" }

  # ==========================================
  # 2. Department Management
  # ==========================================
  /departments:
    get:
      tags: ["2. Department Management"]
      summary: "부서 목록 조회"
      description: |
        부서 목록을 조회합니다.<br>
        `parentId`를 사용하여 트리 구조를 구성할 수 있습니다.
      parameters:
        - name: "organizationId"
          in: "query"
          required: true
          description: "소속 조직 ID"
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440000"
        - name: "parentId"
          in: "query"
          description: "상위 부서 ID 필터"
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440001"
        - name: "name"
          in: "query"
          description: "부서명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "인사팀"
        - name: "code"
          in: "query"
          description: "부서 코드 검색 (일치)"
          schema:
            type: "string"
            example: "DEPT-001"
        - name: "description"
          in: "query"
          description: "부서 설명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "인사"
        - name: "externalSystemId"
          in: "query"
          description: "외부 시스템 ID 검색"
          schema:
            type: "string"
            example: "DEPT-EXT-001"
        - name: "isSynced"
          in: "query"
          description: "동기화 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "isActive"
          in: "query"
          description: "활성 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "page"
          in: "query"
          schema:
            type: "integer"
            default: 0
            example: 0
        - name: "size"
          in: "query"
          schema:
            type: "integer"
            default: 20
            example: 20
        - name: "sort"
          in: "query"
          description: "정렬 (예: name,asc)"
          schema:
            type: "array"
            items:
              type: "string"
            example: ["name,asc"]
      responses:
        '200':
          description: "성공"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  content:
                    type: "array"
                    items: { $ref: "#/components/schemas/Department" }
                  page: { $ref: "#/components/schemas/PageMetadata" }

    post:
      tags: ["2. Department Management"]
      summary: "부서 생성"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/DepartmentRequest" }
      responses:
        '200':
          description: "생성됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Department" }

  /departments/{id}:
    put:
      tags: ["2. Department Management"]
      summary: "부서 정보 수정"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440002"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/DepartmentRequest" }
      responses:
        '200':
          description: "수정됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Department" }

    delete:
      tags: ["2. Department Management"]
      summary: "부서 삭제"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440002"
      responses:
        '200':
          description: "삭제 성공"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/DeleteResult" }

  # ==========================================
  # 3. Job Management
  # ==========================================
  /jobs:
    get:
      tags: ["3. Job Management"]
      summary: "직무(Job) 목록 조회"
      parameters:
        - name: "organizationId"
          in: "query"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440000"
        - name: "name"
          in: "query"
          description: "직무명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "개발"
        - name: "code"
          in: "query"
          description: "직무 코드 검색 (일치)"
          schema:
            type: "string"
            example: "JOB-DEV"
        - name: "description"
          in: "query"
          description: "설명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "소프트웨어"
        - name: "externalSystemId"
          in: "query"
          description: "외부 시스템 ID 검색"
          schema:
            type: "string"
            example: "JOB-EXT-001"
        - name: "isSynced"
          in: "query"
          description: "동기화 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "isActive"
          in: "query"
          description: "활성 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "page"
          in: "query"
          schema:
            type: "integer"
            default: 0
            example: 0
        - name: "size"
          in: "query"
          schema:
            type: "integer"
            default: 20
            example: 20
        - name: "sort"
          in: "query"
          description: "정렬 (예: name,asc)"
          schema:
            type: "array"
            items:
              type: "string"
            example: ["name,asc"]
      responses:
        '200':
          description: "성공"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  content:
                    type: "array"
                    items: { $ref: "#/components/schemas/Job" }
                  page: { $ref: "#/components/schemas/PageMetadata" }
    post:
      tags: ["3. Job Management"]
      summary: "직무 생성"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/JobRequest" }
      responses:
        '200':
          description: "생성됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Job" }

  /jobs/{id}:
    put:
      tags: ["3. Job Management"]
      summary: "직무 수정"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440003"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/JobRequest" }
      responses:
        '200':
          description: "수정됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Job" }
    delete:
      tags: ["3. Job Management"]
      summary: "직무 삭제"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440003"
      responses:
        '200':
          description: "삭제 성공"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/DeleteResult" }

  # ==========================================
  # 4. Position Management
  # ==========================================
  /positions:
    get:
      tags: ["4. Position Management"]
      summary: "직책(Position) 목록 조회"
      parameters:
        - name: "organizationId"
          in: "query"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440000"
        - name: "name"
          in: "query"
          description: "직책명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "팀장"
        - name: "code"
          in: "query"
          description: "직책 코드 검색 (일치)"
          schema:
            type: "string"
            example: "POS-LEADER"
        - name: "description"
          in: "query"
          description: "설명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "관리자"
        - name: "externalSystemId"
          in: "query"
          description: "외부 시스템 ID 검색"
          schema:
            type: "string"
            example: "POS-EXT-001"
        - name: "isSynced"
          in: "query"
          description: "동기화 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "isActive"
          in: "query"
          description: "활성 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "page"
          in: "query"
          schema:
            type: "integer"
            default: 0
            example: 0
        - name: "size"
          in: "query"
          schema:
            type: "integer"
            default: 20
            example: 20
        - name: "sort"
          in: "query"
          description: "정렬 (예: name,asc)"
          schema:
            type: "array"
            items:
              type: "string"
            example: ["name,asc"]
      responses:
        '200':
          description: "성공"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  content:
                    type: "array"
                    items: { $ref: "#/components/schemas/Position" }
                  page: { $ref: "#/components/schemas/PageMetadata" }
    post:
      tags: ["4. Position Management"]
      summary: "직책 생성"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/PositionRequest" }
      responses:
        '200':
          description: "생성됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Position" }

  /positions/{id}:
    put:
      tags: ["4. Position Management"]
      summary: "직책 수정"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440004"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/PositionRequest" }
      responses:
        '200':
          description: "수정됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Position" }
    delete:
      tags: ["4. Position Management"]
      summary: "직책 삭제"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440004"
      responses:
        '200':
          description: "삭제 성공"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/DeleteResult" }

  # ==========================================
  # 5. Grade Management
  # ==========================================
  /grades:
    get:
      tags: ["5. Grade Management"]
      summary: "직급(Grade) 목록 조회"
      parameters:
        - name: "organizationId"
          in: "query"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440000"
        - name: "name"
          in: "query"
          description: "직급명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "책임"
        - name: "code"
          in: "query"
          description: "직급 코드 검색 (일치)"
          schema:
            type: "string"
            example: "GRD-L2"
        - name: "description"
          in: "query"
          description: "설명 검색 (부분 일치)"
          schema:
            type: "string"
            example: "중간"
        - name: "step"
          in: "query"
          description: "직급 서열 검색 (일치)"
          schema:
            type: "integer"
            example: 2
        - name: "externalSystemId"
          in: "query"
          description: "외부 시스템 ID 검색"
          schema:
            type: "string"
            example: "GRD-EXT-001"
        - name: "isSynced"
          in: "query"
          description: "동기화 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "isActive"
          in: "query"
          description: "활성 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "page"
          in: "query"
          schema:
            type: "integer"
            default: 0
            example: 0
        - name: "size"
          in: "query"
          schema:
            type: "integer"
            default: 20
            example: 20
        - name: "sort"
          in: "query"
          description: "정렬 (예: name,asc)"
          schema:
            type: "array"
            items:
              type: "string"
            example: ["step,asc"]
      responses:
        '200':
          description: "성공"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  content:
                    type: "array"
                    items: { $ref: "#/components/schemas/Grade" }
                  page: { $ref: "#/components/schemas/PageMetadata" }
    post:
      tags: ["5. Grade Management"]
      summary: "직급 생성"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/GradeRequest" }
      responses:
        '200':
          description: "생성됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Grade" }

  /grades/{id}:
    put:
      tags: ["5. Grade Management"]
      summary: "직급 수정"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440005"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/GradeRequest" }
      responses:
        '200':
          description: "수정됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Grade" }
    delete:
      tags: ["5. Grade Management"]
      summary: "직급 삭제"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440005"
      responses:
        '200':
          description: "삭제 성공"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/DeleteResult" }

  # ==========================================
  # 6. Employee Management
  # ==========================================
  /employees:
    get:
      tags: ["6. Employee Management"]
      summary: "직원 목록 조회"
      parameters:
        - name: "organizationId"
          in: "query"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440000"
        - name: "departmentId"
          in: "query"
          description: "부서 필터 (하위 부서 포함 여부는 옵션)"
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440002"
        - name: "jobId"
          in: "query"
          description: "직무 ID 필터"
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440003"
        - name: "positionId"
          in: "query"
          description: "직책 ID 필터"
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440004"
        - name: "gradeId"
          in: "query"
          description: "직급 ID 필터"
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440005"
        - name: "name"
          in: "query"
          description: "이름 검색 (부분 일치)"
          schema:
            type: "string"
            example: "홍길동"
        - name: "employeeNumber"
          in: "query"
          description: "사번 검색 (일치)"
          schema:
            type: "string"
            example: "2023001"
        - name: "email"
          in: "query"
          description: "이메일 검색 (일치)"
          schema:
            type: "string"
            example: "hong@company.com"
        - name: "mobileNumber"
          in: "query"
          description: "전화번호 검색 (일치)"
          schema:
            type: "string"
            example: "010-1234-5678"
        - name: "userId"
          in: "query"
          description: "시스템 계정 ID 검색"
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440007"
        - name: "externalSystemId"
          in: "query"
          description: "외부 시스템 ID 검색"
          schema:
            type: "string"
            example: "EMP-EXT-001"
        - name: "isSynced"
          in: "query"
          description: "동기화 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "isActive"
          in: "query"
          description: "활성 여부 필터"
          schema:
            type: "boolean"
            example: true
        - name: "employmentType"
          in: "query"
          description: "고용 형태 필터"
          schema:
            type: "string"
            example: "REGULAR"
        # [삭제] partnerCompanyName 검색 조건 삭제 (Organization으로 통합됨)
        - name: "englishName"
          in: "query"
          description: "영문 이름 검색 (부분 일치)"
          schema:
            type: "string"
            example: "Hong"
        - name: "personalEmail"
          in: "query"
          description: "개인 이메일 검색 (일치)"
          schema:
            type: "string"
            example: "hong.private@gmail.com"
        - name: "joinDateStart"
          in: "query"
          description: "입사일 검색 시작일 (YYYY-MM-DD)"
          schema:
            type: "string"
            format: "date"
            example: "2023-01-01"
        - name: "joinDateEnd"
          in: "query"
          description: "입사일 검색 종료일 (YYYY-MM-DD)"
          schema:
            type: "string"
            format: "date"
            example: "2023-12-31"
        - name: "resignationDateStart"
          in: "query"
          description: "퇴사일 검색 시작일 (YYYY-MM-DD)"
          schema:
            type: "string"
            format: "date"
            example: "2024-01-01"
        - name: "resignationDateEnd"
          in: "query"
          description: "퇴사일 검색 종료일 (YYYY-MM-DD)"
          schema:
            type: "string"
            format: "date"
            example: "2024-12-31"
        - name: "birthDate"
          in: "query"
          description: "생년월일 검색 (YYYY-MM-DD)"
          schema:
            type: "string"
            format: "date"
            example: "1990-01-01"
        - name: "gender"
          in: "query"
          description: "성별 필터 (M/F/OTHER)"
          schema:
            type: "string"
            example: "M"
        - name: "nationality"
          in: "query"
          description: "국적 필터 (ISO 2자리)"
          schema:
            type: "string"
            example: "KR"
        - name: "carNumber"
          in: "query"
          description: "차량 번호 검색 (부분 일치)"
          schema:
            type: "string"
            example: "12가3456"
        - name: "page"
          in: "query"
          schema:
            type: "integer"
            default: 0
            example: 0
        - name: "size"
          in: "query"
          schema:
            type: "integer"
            default: 20
            example: 20
        - name: "sort"
          in: "query"
          description: "정렬 (예: name,asc)"
          schema:
            type: "array"
            items:
              type: "string"
            example: ["name,asc"]
      responses:
        '200':
          description: "성공"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  content:
                    type: "array"
                    items: { $ref: "#/components/schemas/Employee" }
                  page: { $ref: "#/components/schemas/PageMetadata" }

    post:
      tags: ["6. Employee Management"]
      summary: "직원 등록 (입사 처리)"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/EmployeeCreateRequest" }
      responses:
        '200':
          description: "생성됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Employee" }

  /employees/{id}:
    get:
      tags: ["6. Employee Management"]
      summary: "직원 상세 조회"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440006"
      responses:
        '200':
          description: "성공"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Employee" }
    put:
      tags: ["6. Employee Management"]
      summary: "직원 정보 수정 (기본 정보)"
      description: "이름, 연락처 등 기본 정보를 수정합니다. 소속 변경(부서이동)은 발령 API를 사용하세요."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440006"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/EmployeeUpdateRequest" }
      responses:
        '200':
          description: "수정됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Employee" }
    delete:
      tags: ["6. Employee Management"]
      summary: "직원 삭제 (퇴사 처리)"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440006"
      responses:
        '200':
          description: "삭제 성공"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/DeleteResult" }

  # ==========================================
  # 5. Assignment (발령)
  # ==========================================
  /employees/{id}/assignments:
    post:
      tags: ["6. Employee Management"]
      summary: "직원 발령 (부서/직책 이동)"
      description: "직원의 소속 부서, 직무, 직책, 직급 등을 변경하고 이력을 남깁니다."
      parameters:
        - name: "id"
          in: "path"
          required: true
          description: "대상 직원 ID"
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440006"
      requestBody:
        content:
          application/json:
            schema: { $ref: "#/components/schemas/AssignmentRequest" }
      responses:
        '200':
          description: "발령 처리됨"
          content:
            application/json:
              schema: { $ref: "#/components/schemas/Employee" }

    get:
      tags: ["6. Employee Management"]
      summary: "직원 발령 이력 조회"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
            example: "550e8400-e29b-41d4-a716-446655440006"
        - name: "appointmentType"
          in: "query"
          description: "발령 구분 필터 (HIRE, PROMOTION, TRANSFER 등)"
          schema:
            type: "string"
            example: "PROMOTION"
        - name: "appointmentDateStart"
          in: "query"
          description: "발령일 검색 시작일 (YYYY-MM-DD)"
          schema:
            type: "string"
            format: "date"
            example: "2023-01-01"
        - name: "appointmentDateEnd"
          in: "query"
          description: "발령일 검색 종료일 (YYYY-MM-DD)"
          schema:
            type: "string"
            format: "date"
            example: "2023-12-31"
        - name: "page"
          in: "query"
          schema:
            type: "integer"
            default: 0
            example: 0
        - name: "size"
          in: "query"
          schema:
            type: "integer"
            default: 20
            example: 20
        - name: "sort"
          in: "query"
          description: "정렬 (예: appointmentDate,desc)"
          schema:
            type: "array"
            items:
              type: "string"
            example: ["appointmentDate,desc"]
      responses:
        '200':
          description: "성공"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  content:
                    type: "array"
                    items: { $ref: "#/components/schemas/AssignmentHistory" }
                  page: { $ref: "#/components/schemas/PageMetadata" }